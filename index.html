<html>
<head>
<title>Vertical-LR notepad for Mongolian and Manchu</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
setInterval(function change() {
var txta = window.getSelection();
document.getElementById('loop').innerHTML = txta;
$('#loop').each(function (index) {
    var characters = $(this).text().split("");
    $this = $(this);
    $this.empty();
    $.each(characters, function (i, el) {
    $this.append("<span class='span'>" + el + "</span>");
    });
});
var x = document.getElementsByClassName('span');
var i;
var langsel = document.getElementById("lang");
for (i = 0; i < x.length; i++) {
if (x[i].innerHTML == 'ᠠ') {x[i].innerHTML = "a";}
if (x[i].innerHTML == 'ᠡ') {x[i].innerHTML = "e";}
if (x[i].innerHTML == 'ᠢ') {x[i].innerHTML = "i";}
if (x[i].innerHTML == 'ᠣ') {x[i].innerHTML = "o";}
if (x[i].innerHTML == 'ᠤ') {x[i].innerHTML = "u";}
if (x[i].innerHTML == 'ᠥ') {x[i].innerHTML = "ö";}
if (x[i].innerHTML == 'ᠦ') {x[i].innerHTML = "ü";}
if (x[i].innerHTML == 'ᠧ') {x[i].innerHTML = "ē";}
if (x[i].innerHTML == 'ᠨ') {x[i].innerHTML = "n";}
if (x[i].innerHTML == 'ᠩ') {x[i].innerHTML = "ng";}
if (x[i].innerHTML == 'ᠫ') {x[i].innerHTML = "p";}
if (x[i].innerHTML == 'ᠪ') {x[i].innerHTML = "b";}
if (x[i].innerHTML == 'ᠬ') {x[i].innerHTML = "q";}
if (x[i].innerHTML == 'ᠭ') {x[i].innerHTML = "γ";}
if (x[i].innerHTML == 'ᠮ') {x[i].innerHTML = "m";}
if (x[i].innerHTML == 'ᠯ') {x[i].innerHTML = "l";}
if (x[i].innerHTML == 'ᠰ') {x[i].innerHTML = "s";}
if (x[i].innerHTML == 'ᠱ') {x[i].innerHTML = "š";}
if (x[i].innerHTML == 'ᠲ') {x[i].innerHTML = "t";}
if (x[i].innerHTML == 'ᠳ') {x[i].innerHTML = "d";}
if (x[i].innerHTML == 'ᠴ') {
if (langsel.value == 'mongol'){
 {x[i].innerHTML = "č";}
}
if (langsel.value == 'manchu'){
 {x[i].innerHTML = "c";}
}
}
if (x[i].innerHTML == 'ᠵ') {
if (langsel.value == 'mongol'){
 {x[i].innerHTML = "ǰ";}
}
if (langsel.value == 'manchu'){
 {x[i].innerHTML = "j";}
}
}
if (x[i].innerHTML == 'ᠶ') {x[i].innerHTML = "y";}
if (x[i].innerHTML == 'ᠷ') {x[i].innerHTML = "r";}
if (x[i].innerHTML == 'ᠸ') {x[i].innerHTML = "w";}
if (x[i].innerHTML == 'ᠹ') {x[i].innerHTML = "f";}
if (x[i].innerHTML == 'ᠺ') {
if (langsel.value == 'mongol'){
 {x[i].innerHTML = "g";}
}
if (langsel.value == 'manchu'){
 {x[i].innerHTML = "k'";}
}
}
if (x[i].innerHTML == 'ᠻ') {x[i].innerHTML = "k";}
if (x[i].innerHTML == 'ᠼ') {x[i].innerHTML = "c";}
if (x[i].innerHTML == 'ᠽ') {x[i].innerHTML = "z";}
if (x[i].innerHTML == 'ᠾ') {x[i].innerHTML = "h";}
if (x[i].innerHTML == 'ᠿ') {x[i].innerHTML = "ž";}
if (x[i].innerHTML == 'ᡀ') {x[i].innerHTML = "lh";}
if (x[i].innerHTML == 'ᡁ') {x[i].innerHTML = "zh";}
if (x[i].innerHTML == 'ᡂ') {x[i].innerHTML = "ch";}

if (x[i].innerHTML == 'ᡝ') {x[i].innerHTML = "e";}
if (x[i].innerHTML == 'ᡳ') {x[i].innerHTML = "i";}
if (x[i].innerHTML == 'ᡟ') {x[i].innerHTML = "y";}
if (x[i].innerHTML == 'ᡠ') {x[i].innerHTML = "u";}
if (x[i].innerHTML == 'ᡡ') {x[i].innerHTML = "ū";}
if (x[i].innerHTML == 'ᡴ') {x[i].innerHTML = "k";}
if (x[i].innerHTML == 'ᡤ') {x[i].innerHTML = "g";}
if (x[i].innerHTML == 'ᡥ') {x[i].innerHTML = "h";}
if (x[i].innerHTML == 'ᡦ') {x[i].innerHTML = "p";}
if (x[i].innerHTML == 'ᡧ') {x[i].innerHTML = "š";}
if (x[i].innerHTML == 'ᡨ') {x[i].innerHTML = "t";}
if (x[i].innerHTML == 'ᡩ') {x[i].innerHTML = "d";}
if (x[i].innerHTML == 'ᡵ') {x[i].innerHTML = "r";}
if (x[i].innerHTML == 'ᡶ') {x[i].innerHTML = "f";}
if (x[i].innerHTML == 'ᡬ') {x[i].innerHTML = "g'";}
if (x[i].innerHTML == 'ᡭ') {x[i].innerHTML = "h'";}
if (x[i].innerHTML == 'ᡮ') {x[i].innerHTML = "ts'";}
if (x[i].innerHTML == 'ᡯ') {x[i].innerHTML = "dz";}
if (x[i].innerHTML == 'ᡰ') {x[i].innerHTML = "ž";}
if (x[i].innerHTML == 'ᡱ') {x[i].innerHTML = "c'y";}
if (x[i].innerHTML == 'ᡷ') {x[i].innerHTML = "j'y";}

if (x[i].innerHTML == '᠐') {x[i].innerHTML = "0";}
if (x[i].innerHTML == '᠑') {x[i].innerHTML = "1";}
if (x[i].innerHTML == '᠒') {x[i].innerHTML = "2";}
if (x[i].innerHTML == '᠓') {x[i].innerHTML = "3";}
if (x[i].innerHTML == '᠔') {x[i].innerHTML = "4";}
if (x[i].innerHTML == '᠕') {x[i].innerHTML = "5";}
if (x[i].innerHTML == '᠖') {x[i].innerHTML = "6";}
if (x[i].innerHTML == '᠗') {x[i].innerHTML = "7";}
if (x[i].innerHTML == '᠘') {x[i].innerHTML = "8";}
if (x[i].innerHTML == '᠙') {x[i].innerHTML = "9";}
if (x[i].innerHTML == '᠁') {x[i].innerHTML = "...";}
if (x[i].innerHTML == '᠂') {x[i].innerHTML = ",";}
if (x[i].innerHTML == '᠃') {x[i].innerHTML = ".";}
if (x[i].innerHTML == '᠄') {x[i].innerHTML = "<span class='highlight'>\u003a</span>";}
if (x[i].innerHTML == '᠊') {x[i].innerHTML = "<span class='highlight'>&</span>";}
if (x[i].innerHTML == '\u180b') {x[i].innerHTML = "<span class='highlight'>\u0027</span>";}
if (x[i].innerHTML == '\u180c') {x[i].innerHTML = "<span class='highlight'>\u0022</span>";}
if (x[i].innerHTML == '\u180d') {x[i].innerHTML = "<span class='highlight'>`</span>";}
if (x[i].innerHTML == '\u180e') {x[i].innerHTML = "<span class='highlight'>_</span>";}
if (x[i].innerHTML == '\u200c') {x[i].innerHTML = "<span class='highlight'>^</span>";}
if (x[i].innerHTML == '\u200d') {x[i].innerHTML = "<span class='highlight'>*</span>";}
if (x[i].innerHTML == '\u202f') {x[i].innerHTML = "<span class='highlight'>-</span>";}
if (x[i].innerHTML == '︕') {x[i].innerHTML = "!";}
if (x[i].innerHTML == '︖') {x[i].innerHTML = "?";}
if (x[i].innerHTML == '︽') {x[i].innerHTML = "《";}
if (x[i].innerHTML == '︾') {x[i].innerHTML = "》";}

if (x[i].innerHTML == '᠈') {x[i].innerHTML = ",";}
if (x[i].innerHTML == '᠉') {x[i].innerHTML = ".";}
}
}, 100);
</script>
<style>
@import url(https://victorlee.github.io/mongol-fonts/stylesheet.css);
@import url(https://victorlee.github.io/manchu-fonts/stylesheet.css);
#popup {
  position:fixed;
  padding:0;
  margin:0;
  top:0;
  left:0;
  width: 100%;
  height: 100%;
  background:rgba(240,240,240,0.5);
  z-index:1;
}
.popup {
  position:fixed;
  width:15rem;
  height:5rem;
  background-color: #fff;
  padding:1rem;
  border:5px solid #888;
  margin: 10% auto;
  left:0;
  right:0;
  text-align:center;
  font-size: 1.4rem;
  font-family: arial;
  line-height: 1.8;
}
.popup>button {
  font-family: arial;
  background-color: #eef;
  height: 2rem;
  border: solid 2px #aaa;
}
.popup>button:hover {
  background-color: #dde;
}
div {
    line-height: 1.4;
    height: 95%;
    min-width: 100%;
    outline: none; 
    border: none;
    cursor: text;
    writing-mode: vertical-lr;
    display: inline-block;
    font-size: 2.0rem
}
::selection {
color: #000;
background: #ddd;
}
.input {
    position: fixed;
    bottom: 4px;
    right: 4px;
    resize: none;
}
#loop {
    position: fixed;
    bottom: 0px;
    padding-bottom:1px;
    left: 4px;
    resize: none;
    max-width: 65%;
    max-height: 4.5rem;
    font-size: 1.3em; 
    overflow: auto;
    background: rgba(255,255,255,0.8);
}
.highlight {color: red;}
</style>
</head>
<body>
<span id="popup">
  <span class="popup">
    language<br>
    <button onclick="selectmong()" style="font-family:Menk Garqag Tig;font-size: 1.5rem;">ᠮᠣᠩᠭᠣᠯ ᠬᠡᠯᠡ</button>
    <button onclick="selectman()" style="font-family:XM_BH;font-size: 1.3rem;">ᠮᠠᠨᠵᡠ ᡤᡳᠰᡠᠨ</button>
  </span>
</span>
<div id="body" spellcheck="false" contenteditable="true"></div>
<span class="loop">
<span id="loop"></span>
</span>
<span class="input">
<button onclick="copyloop()">copy translit.</button>
<select id="lang" oninput="fontSettings()">
  <option value="mongol">Mongolian</option>
  <option value="manchu">Manchu</option>
</select>
<select id="font" oninput="fontChange()">
<optgroup label="Serif" id="mongolfont1">
  <option value="Mongolian White">Mongolian White</option>
  <option value="Chagan">Chagan</option>
  <option value="Garchag">Garchag</option>
  <option value="Syurga">Syurga</option>
  <option value="Urga">Urga</option>
  <option value="Menksoft2012">Menksoft2012</option>
  <option value="Mongolian Baiti">Mongolian Baiti</option>
  <option value="Menk Qingming Tig">Menk Qingming Tig</option>
  <option value="Menk Mcdvnbar Tig">Menk Mcdvnbar Tig</option>
  <option value="Menk Tvgvrai Tig">Menk Tvgvrai Tig</option>
  <option value="Menk Budun Tig">Menk Budun Tig</option>
  <option value="Menk Hvlvsvn Tig">Menk Hvlvsvn Tig</option>
  <option value="Menk Qagan Tig">Menk Qagan Tig</option>
  <option value="Menk Ujug Tig">Menk Ujug Tig</option>
</optgroup>
<optgroup label="Sans-Serif" id="mongolfont2">
  <option value="Noto Sans Mongolian, sans-serif">Noto Sans Mongolian</option>
  <option value="Onon Sonin Sans, sans-serif">Onon Sonin Sans</option>
</optgroup>
<optgroup label="Cursive" id="mongolfont3">
  <option value="Mongolian Writing">Mongolian Writing</option>
  <option value="Bichimel">Bichimel</option>
  <option value="Menk Hawang Tig">Menk Hawang Tig</option>
  <option value="Menk Lhundb Tig">Menk Lhundb Tig</option>
  <option value="Menk Amglang Tig">Menk Amglang Tig</option>
  <option value="Menk Qimed Tig">Menk Qimed Tig</option>
</optgroup>
<optgroup label="Bold" id="mongolfont4">
  <option value="Mongolian Art">Mongolian Art</option>
  <option value="Mongolian Title">Mongolian Title</option>
  <option value="MongolianScript">MongolianScript</option>
  <option value="Menk Garqag Tig">Menk Garqag Tig</option>
  <option value="Menk Sidam Tig">Menk Sidam Tig</option>
</optgroup>
<optgroup label="Manchu" id="manchufont" style="display:none">
  <option value="XM_ZH">XM_ZhengHei</option>
  <option value="XM_ZB">XM_ZhengBai</option>
  <option value="XM_BH">XM_BiaoHei</option>
  <option value="XM_GF">XM_GuFeng</option>
  <option value="XM_AB">XM_YaBai</option>
  <option value="XM_LY">XM_LiuYe</option>
  <option value="XM_WJ">XM_WenJian</option>
  <option value="XM_SK">XM_ShuKa</option>
  <option value="XM_WQ">XM_WenQin</option>
  <option value="XM_XS">XM_XingShu</option>
  <option value="XM_YB">XM_YingBai</option>
</optgroup>
</select>
<select id="size" oninput="sizeChange()">
  <option value="1.0rem">1.0</option>
  <option value="1.2rem">1.2</option>
  <option value="1.4rem">1.4</option>
  <option value="1.6rem">1.6</option>
  <option value="1.8rem">1.8</option>
  <option value="2.0rem" selected="selected">2.0</option>
  <option value="2.2rem">2.2</option>
  <option value="2.4rem">2.4</option>
  <option value="2.6rem">2.6</option>
  <option value="2.8rem">2.8</option>
  <option value="3.0rem">3.0</option>
  <option value="3.2rem">3.2</option>
  <option value="3.4rem">3.4</option>
  <option value="3.6rem">3.6</option>
  <option value="3.8rem">3.8</option>
  <option value="4.0rem">4.0</option>
</select>
</span>
<script>
var popup = document.getElementById('popup');
function selectmong() {
  document.getElementById("lang").value = 'mongol';
  popup.style.display = 'none';
  fontSettings();
}
function selectman() {
  popup.style.display = 'none';
  document.getElementById("lang").value = 'manchu';
  fontSettings();
}
var manChar = /[\u185D-\u1877]/mg;
$(document).ready(function(){
    $('#body').keyup(function(){
        var isMan = this.innerHTML.match(manChar);
        if(isMan !== null) {
            if(document.getElementById('lang').value == 'mongol') {
                alert("Current language mode is 'Mongolian'. You have (previously) entered a Manchu alphabet, please change the language setting below or clear the text.");
             }
         }
    });
});
var monChar = /[\u1821-\u1822]|[\u1824-\u1827]|[\u182B-\u182D]|[\u1831-\u1833]|[\u1837]|[\u1839]|[\u183B-\u1842]/mg;
$(document).ready(function(){
    $('#body').keyup(function(){
        var isMan = this.innerHTML.match(monChar);
        if(isMan !== null) {
            if(document.getElementById('lang').value == 'manchu') {
                alert("Current language mode is 'Manchu'. You have (previously) entered a Mongolian alphabet, please change the language setting below or clear the text.");
             }
         }
    });
});
(function() {
    function scrollHorizontally(e) {
        e = window.event || e;
        var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));
        document.documentElement.scrollLeft -= (delta*50);
        document.body.scrollLeft -= (delta*50);
        e.preventDefault();
    }
    if (window.addEventListener) {
        window.addEventListener("mousewheel", scrollHorizontally, false);
        window.addEventListener("DOMMouseScroll", scrollHorizontally, false);
    } else {
        window.attachEvent("onmousewheel", scrollHorizontally);
    }
})();
function fontChange() {
  document.getElementById('body').style.fontFamily = document.getElementById('font').value;
}
function sizeChange() {
  document.getElementById('body').style.fontSize = document.getElementById('size').value;
}
var ce = document.querySelector('[contenteditable]')
ce.addEventListener('paste', function (e) {
  e.preventDefault()
  var text = e.clipboardData.getData('text/plain')
  document.execCommand('insertText', false, text)
})
document.getElementById('body').innerHTML = localStorage['body'] || '';
setInterval(function() {
     localStorage['body'] = document.getElementById('body').innerHTML;
});
function fontSettings() {
    for(var i=1; i<=4; i++){
        var mongolfonts = document.getElementById("mongolfont" + i);
        if (document.getElementById('lang').value === 'mongol') {
            document.getElementById('body').style.fontFamily = 'Mongolian White';
            mongolfonts.style.display = 'block';
            document.getElementById('manchufont').style.display = 'none';
            document.getElementById('font').value = 'Mongolian White';
        } else if (document.getElementById('lang').value === 'manchu') {
            document.getElementById('body').style.fontFamily = 'XM_ZH';
            mongolfonts.style.display = 'none';
            document.getElementById('manchufont').style.display = 'block';
            document.getElementById('font').value = 'XM_ZH';
        }
    }
};
function copyloop() {
var range = document.createRange();
range.selectNode(document.getElementById("loop"));
window.getSelection().removeAllRanges();
window.getSelection().addRange(range);
document.execCommand("copy");
window.getSelection().removeAllRanges();
}
</script>
</body>
</html>
